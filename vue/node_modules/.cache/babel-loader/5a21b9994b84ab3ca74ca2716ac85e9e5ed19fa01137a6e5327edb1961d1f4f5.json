{"ast":null,"code":"export default {\n  name: \"Welcome\",\n  props: {\n    departmentName: {\n      type: String,\n      default: ''\n    },\n    departmentHeader: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      currentTime: new Date().toLocaleString(),\n      departmentInfo: {\n        name: this.departmentName || ''\n      }\n    };\n  },\n  computed: {\n    isHeader() {\n      return this.user.level === 'HEADER' || this.user.level && this.user.level.includes('主管');\n    },\n    displayDepartmentName() {\n      return this.departmentInfo.name || this.departmentName || this.user.departmentName || '未分配部门';\n    }\n  },\n  watch: {\n    departmentName: {\n      handler(newVal) {\n        if (newVal) {\n          this.departmentInfo.name = newVal;\n        }\n      },\n      immediate: true\n    }\n  },\n  created() {\n    this.updateTime();\n    setInterval(this.updateTime, 1000);\n    if (!this.departmentName) {\n      this.loadDepartmentInfo();\n    }\n  },\n  methods: {\n    updateTime() {\n      this.currentTime = new Date().toLocaleString();\n    },\n    loadDepartmentInfo() {\n      if (this.user.departmentId) {\n        this.$request.get('/department/findById/' + this.user.departmentId).then(res => {\n          if (res.code === '200' && res.data) {\n            this.departmentInfo.name = res.data.name;\n          }\n        }).catch(error => {\n          console.error(\"获取部门信息失败:\", error);\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","props","departmentName","type","String","default","departmentHeader","data","user","JSON","parse","localStorage","getItem","currentTime","Date","toLocaleString","departmentInfo","computed","isHeader","level","includes","displayDepartmentName","watch","handler","newVal","immediate","created","updateTime","setInterval","loadDepartmentInfo","methods","departmentId","$request","get","then","res","code","catch","error","console"],"sources":["src/components/Welcome.vue"],"sourcesContent":["<template>\n  <div class=\"welcome-container\">\n    <div class=\"welcome-header\">\n      <h1>欢迎使用企业人力资源管理系统</h1>\n      <p class=\"welcome-time\">{{ currentTime }}</p>\n    </div>\n    \n    <!-- 基本欢迎信息 -->\n    <div class=\"role-welcome\">\n      <el-card shadow=\"hover\" class=\"role-card\">\n        <div class=\"role-content\">\n          <p>尊敬的 <b>{{ user.name }}</b>，您好！</p>\n          <p v-if=\"user.role === 'USER'\">您属于 <b>{{ displayDepartmentName }}</b> 部门。</p>\n          <p v-if=\"isHeader\">您现在管理的是 <b>{{ displayDepartmentName }}</b> 部门。</p>\n          <p v-if=\"user.role === 'ADMIN'\">您是系统管理员。</p>\n        </div>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Welcome\",\n  props: {\n    departmentName: {\n      type: String,\n      default: ''\n    },\n    departmentHeader: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      currentTime: new Date().toLocaleString(),\n      departmentInfo: {\n        name: this.departmentName || ''\n      }\n    }\n  },\n  computed: {\n    isHeader() {\n      return this.user.level === 'HEADER' || \n             (this.user.level && this.user.level.includes('主管'));\n    },\n    displayDepartmentName() {\n      return this.departmentInfo.name || this.departmentName || this.user.departmentName || '未分配部门';\n    }\n  },\n  watch: {\n    departmentName: {\n      handler(newVal) {\n        if (newVal) {\n          this.departmentInfo.name = newVal;\n        }\n      },\n      immediate: true\n    }\n  },\n  created() {\n    this.updateTime();\n    setInterval(this.updateTime, 1000);\n    if (!this.departmentName) {\n      this.loadDepartmentInfo();\n    }\n  },\n  methods: {\n    updateTime() {\n      this.currentTime = new Date().toLocaleString();\n    },\n    loadDepartmentInfo() {\n      if (this.user.departmentId) {\n        this.$request.get('/department/findById/' + this.user.departmentId).then(res => {\n          if (res.code === '200' && res.data) {\n            this.departmentInfo.name = res.data.name;\n          }\n        }).catch(error => {\n          console.error(\"获取部门信息失败:\", error);\n        });\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.welcome-container {\n  padding: 20px;\n}\n.welcome-header {\n  text-align: center;\n  margin-bottom: 30px;\n}\n.welcome-time {\n  color: #666;\n  font-size: 16px;\n}\n.role-welcome {\n  max-width: 800px;\n  margin: 0 auto;\n}\n.role-card {\n  border-radius: 6px;\n}\n.role-content {\n  padding: 20px;\n  text-align: center;\n}\n.role-content p {\n  margin: 10px 0;\n  font-size: 16px;\n  line-height: 1.5;\n}\n</style> "],"mappings":"AAsBA;EACAA,IAAA;EACAC,KAAA;IACAC,cAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAC,gBAAA;MACAH,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EACAE,KAAA;IACA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,WAAA,MAAAC,IAAA,GAAAC,cAAA;MACAC,cAAA;QACAhB,IAAA,OAAAE,cAAA;MACA;IACA;EACA;EACAe,QAAA;IACAC,SAAA;MACA,YAAAV,IAAA,CAAAW,KAAA,iBACA,KAAAX,IAAA,CAAAW,KAAA,SAAAX,IAAA,CAAAW,KAAA,CAAAC,QAAA;IACA;IACAC,sBAAA;MACA,YAAAL,cAAA,CAAAhB,IAAA,SAAAE,cAAA,SAAAM,IAAA,CAAAN,cAAA;IACA;EACA;EACAoB,KAAA;IACApB,cAAA;MACAqB,QAAAC,MAAA;QACA,IAAAA,MAAA;UACA,KAAAR,cAAA,CAAAhB,IAAA,GAAAwB,MAAA;QACA;MACA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,UAAA;IACAC,WAAA,MAAAD,UAAA;IACA,UAAAzB,cAAA;MACA,KAAA2B,kBAAA;IACA;EACA;EACAC,OAAA;IACAH,WAAA;MACA,KAAAd,WAAA,OAAAC,IAAA,GAAAC,cAAA;IACA;IACAc,mBAAA;MACA,SAAArB,IAAA,CAAAuB,YAAA;QACA,KAAAC,QAAA,CAAAC,GAAA,gCAAAzB,IAAA,CAAAuB,YAAA,EAAAG,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAC,IAAA,cAAAD,GAAA,CAAA5B,IAAA;YACA,KAAAS,cAAA,CAAAhB,IAAA,GAAAmC,GAAA,CAAA5B,IAAA,CAAAP,IAAA;UACA;QACA,GAAAqC,KAAA,CAAAC,KAAA;UACAC,OAAA,CAAAD,KAAA,cAAAA,KAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}